<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1202.5px" preserveAspectRatio="none" style="width:1303px;height:1202px;background:#FFFFFF;" version="1.1" viewBox="0 0 1303 1202" width="1303.75px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bq4ctkyf6lgd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.5"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="5.0" dy="5.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="1025.2832" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="185" y="156.9141"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="485" y="1066.3184"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="35" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="667.5" y="427.6953"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="35" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="667.5" y="594.8242"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="820.625" y="835.166"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="820.625" y="910.6055"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="1156.875" y="509.3848"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="418.7207" style="stroke:#000000;stroke-width:2.5;" width="1191.875" x="94.375" y="229.8535"/><rect fill="#FFFFFF" height="341.5918" style="stroke:none;stroke-width:1.25;" width="1191.875" x="94.375" y="306.9824"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="389.1602" style="stroke:#000000;stroke-width:2.5;" width="825.625" x="94.375" y="784.2871"/><line style="stroke:#A80036;stroke-width:1.25;stroke-dasharray:5.0,5.0;" x1="190.625" x2="190.625" y1="96.0352" y2="1194.6973"/><line style="stroke:#A80036;stroke-width:1.25;stroke-dasharray:5.0,5.0;" x1="491.25" x2="491.25" y1="1010.7422" y2="1194.6973"/><line style="stroke:#A80036;stroke-width:1.25;stroke-dasharray:5.0,5.0;" x1="673.75" x2="673.75" y1="362.1191" y2="1194.6973"/><line style="stroke:#A80036;stroke-width:1.25;stroke-dasharray:5.0,5.0;" x1="826.25" x2="826.25" y1="709.9609" y2="1194.6973"/><line style="stroke:#A80036;stroke-width:1.25;stroke-dasharray:5.0,5.0;" x1="980" x2="980" y1="96.0352" y2="1194.6973"/><line style="stroke:#A80036;stroke-width:1.25;stroke-dasharray:5.0,5.0;" x1="1162.5" x2="1162.5" y1="96.0352" y2="1194.6973"/><rect fill="#FEFECE" filter="url(#f1bq4ctkyf6lgd)" height="61.5234" style="stroke:#A80036;stroke-width:1.875;" width="163.75" x="106.875" y="28.2617"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="90" x="143.75" y="55.1782">&lt;&lt;server&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="146.25" x="115.625" y="77.1899">ActivityFlowEngine</text><rect fill="#FEFECE" filter="url(#f1bq4ctkyf6lgd)" height="83.5352" style="stroke:#A80036;stroke-width:1.875;" width="115" x="920" y="6.25"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="97.5" x="928.75" y="33.1665">&lt;&lt;domain&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="60" x="947.5" y="55.1782">cliSock:</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="53.75" x="950.625" y="77.1899">Socket</text><rect fill="#FEFECE" filter="url(#f1bq4ctkyf6lgd)" height="61.5234" style="stroke:#A80036;stroke-width:1.875;" width="216.25" x="1052.5" y="28.2617"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="18.75" x="1151.25" y="55.1782">sf:</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="198.75" x="1061.25" y="77.1899">SSLServerSocketFactory</text><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="1025.2832" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="185" y="156.9141"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="485" y="1066.3184"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="35" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="667.5" y="427.6953"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="35" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="667.5" y="594.8242"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="820.625" y="835.166"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="820.625" y="910.6055"/><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="37.5" style="stroke:#A80036;stroke-width:1.25;" width="12.5" x="1156.875" y="509.3848"/><ellipse cx="9.375" cy="155.9766" rx="5" ry="5" style="stroke:#A80036;stroke-width:1.875;fill:none;"/><polygon fill="#A80036" points="170,151.9141,182.5,156.9141,170,161.9141,175,156.9141" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="15" x2="177.5" y1="156.9141" y2="156.9141"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="18.75" y="140.6238">1</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="132.5" x="32.5" y="130.4041">initiates automatic</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="98.75" x="32.5" y="150.8435">task executor</text><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="250" y1="194.8535" y2="194.8535"/><line style="stroke:#A80036;stroke-width:1.25;" x1="250" x2="250" y1="194.8535" y2="211.1035"/><line style="stroke:#A80036;stroke-width:1.25;" x1="198.75" x2="250" y1="211.1035" y2="211.1035"/><polygon fill="#A80036" points="211.25,206.1035,198.75,211.1035,211.25,216.1035,206.25,211.1035" style="stroke:#A80036;stroke-width:1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="206.25" y="188.783">2</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="140" x="220" y="188.783">start(port, blocking)</text><path d="M94.375,229.8535 L175.625,229.8535 L175.625,239.8535 L163.125,252.3535 L94.375,252.3535 L94.375,229.8535 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.25;"/><rect fill="none" height="418.7207" style="stroke:#000000;stroke-width:2.5;" width="1191.875" x="94.375" y="229.8535"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="25" x="113.125" y="247.9724">opt</text><text fill="#000000" font-family="sans-serif" font-size="13.75" font-weight="bold" lengthAdjust="spacing" textLength="81.25" x="194.375" y="246.6272">[if blocking]</text><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="250" y1="280.7324" y2="280.7324"/><line style="stroke:#A80036;stroke-width:1.25;" x1="250" x2="250" y1="280.7324" y2="296.9824"/><line style="stroke:#A80036;stroke-width:1.25;" x1="198.75" x2="250" y1="296.9824" y2="296.9824"/><polygon fill="#A80036" points="211.25,291.9824,198.75,296.9824,211.25,301.9824,206.25,296.9824" style="stroke:#A80036;stroke-width:1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="206.25" y="274.6619">3</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="76.25" x="220" y="274.6619">listen(port)</text><line style="stroke:#000000;stroke-width:1.25;stroke-dasharray:2.0,2.0;" x1="94.375" x2="1286.25" y1="308.2324" y2="308.2324"/><polygon fill="#A80036" points="598.75,332.4219,611.25,337.4219,598.75,342.4219,603.75,337.4219" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="606.25" y1="337.4219" y2="337.4219"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="206.25" y="331.3513">4</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="55" x="220" y="331.3513">create()</text><rect fill="#FEFECE" filter="url(#f1bq4ctkyf6lgd)" height="61.5234" style="stroke:#A80036;stroke-width:1.875;" width="115" x="613.75" y="309.4824"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="97.5" x="622.5" y="336.3989">&lt;&lt;domain&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="51.25" x="645.625" y="358.4106">Thead</text><line style="stroke:#A80036;stroke-width:1.25;" x1="680" x2="732.5" y1="417.6953" y2="417.6953"/><line style="stroke:#A80036;stroke-width:1.25;" x1="732.5" x2="732.5" y1="417.6953" y2="433.9453"/><line style="stroke:#A80036;stroke-width:1.25;" x1="681.25" x2="732.5" y1="433.9453" y2="433.9453"/><polygon fill="#A80036" points="693.75,428.9453,681.25,433.9453,693.75,438.9453,688.75,433.9453" style="stroke:#A80036;stroke-width:1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="688.75" y="411.6248">5</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="76.25" x="702.5" y="411.6248">listen(port)</text><polygon fill="#A80036" points="1141.875,504.3848,1154.375,509.3848,1141.875,514.3848,1146.875,509.3848" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="1149.375" y1="509.3848" y2="509.3848"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="206.25" y="503.3142">6</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="82.5" x="220" y="503.3142">getDefault()</text><line style="stroke:#A80036;stroke-width:1.25;" x1="680" x2="732.5" y1="584.8242" y2="584.8242"/><line style="stroke:#A80036;stroke-width:1.25;" x1="732.5" x2="732.5" y1="584.8242" y2="601.0742"/><line style="stroke:#A80036;stroke-width:1.25;" x1="681.25" x2="732.5" y1="601.0742" y2="601.0742"/><polygon fill="#A80036" points="693.75,596.0742,681.25,601.0742,693.75,606.0742,688.75,601.0742" style="stroke:#A80036;stroke-width:1.25;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="688.75" y="578.7537">7</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="42.5" x="702.5" y="578.7537">start()</text><polygon fill="#A80036" points="731.25,680.2637,743.75,685.2637,731.25,690.2637,736.25,685.2637" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="738.75" y1="685.2637" y2="685.2637"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="206.25" y="679.1931">8</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="82.5" x="220" y="679.1931">create(port)</text><rect fill="#FEFECE" filter="url(#f1bq4ctkyf6lgd)" height="61.5234" style="stroke:#A80036;stroke-width:1.875;" width="156.25" x="746.25" y="657.3242"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="97.5" x="775.625" y="684.2407">&lt;&lt;domain&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="138.75" x="755" y="706.2524">SSLServerSocket</text><polygon fill="#A80036" points="811.875,760.5371,824.375,765.5371,811.875,770.5371,816.875,765.5371" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="819.375" y1="765.5371" y2="765.5371"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="8.75" x="206.25" y="759.4666">9</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="145" x="220" y="759.4666">setNeedClientAuth()</text><path d="M94.375,784.2871 L185.625,784.2871 L185.625,794.2871 L173.125,806.7871 L94.375,806.7871 L94.375,784.2871 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.25;"/><rect fill="none" height="389.1602" style="stroke:#000000;stroke-width:2.5;" width="825.625" x="94.375" y="784.2871"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="35" x="113.125" y="802.406">loop</text><text fill="#000000" font-family="sans-serif" font-size="13.75" font-weight="bold" lengthAdjust="spacing" textLength="293.75" x="204.375" y="801.0608">[every time the server receives a request]</text><polygon fill="#A80036" points="805.625,830.166,818.125,835.166,805.625,840.166,810.625,835.166" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="813.125" y1="835.166" y2="835.166"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="17.5" x="206.25" y="829.0955">10</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="155" x="228.75" y="829.0955">clientSock = accept()</text><polygon fill="#A80036" points="805.625,905.6055,818.125,910.6055,805.625,915.6055,810.625,910.6055" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="813.125" y1="910.6055" y2="910.6055"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="17.5" x="206.25" y="904.5349">11</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="192.5" x="228.75" y="904.5349">clientIP = getInetAddress()</text><polygon fill="#A80036" points="366.25,981.0449,378.75,986.0449,366.25,991.0449,371.25,986.0449" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="373.75" y1="986.0449" y2="986.0449"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="17.5" x="206.25" y="979.9744">12</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="131.25" x="228.75" y="979.9744">create(clientSock)</text><rect fill="#FEFECE" filter="url(#f1bq4ctkyf6lgd)" height="61.5234" style="stroke:#A80036;stroke-width:1.875;" width="215" x="381.25" y="958.1055"/><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="91.25" x="443.125" y="985.022">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="17.5" lengthAdjust="spacing" textLength="197.5" x="390" y="1007.0337">ActivityFlowClientHandler</text><polygon fill="#A80036" points="470,1061.3184,482.5,1066.3184,470,1071.3184,475,1066.3184" style="stroke:#A80036;stroke-width:1.25;"/><line style="stroke:#A80036;stroke-width:1.25;" x1="197.5" x2="477.5" y1="1066.3184" y2="1066.3184"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="17.5" x="206.25" y="1060.2478">13</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="42.5" x="228.75" y="1060.2478">start()</text><rect fill="#FFFFFF" filter="url(#f1bq4ctkyf6lgd)" height="53.3789" style="stroke:#000000;stroke-width:2.5;" width="222.5" x="377.5" y="1113.8184"/><polygon fill="#EEEEEE" points="377.5,1113.8184,455,1113.8184,455,1123.8184,442.5,1136.3184,377.5,1136.3184,377.5,1113.8184" style="stroke:#000000;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="16.25" font-weight="bold" lengthAdjust="spacing" textLength="21.25" x="393.75" y="1133.1873">ref</text><text fill="#000000" font-family="sans-serif" font-size="16.25" lengthAdjust="spacing" textLength="91.25" x="445.625" y="1158.1873">SD_Request</text><!--MD5=[fae46c1c6c8b2f7ea909c2322022b283]
@startuml
autonumber
hide footbox

participant "<<server>>\nActivityFlowEngine" as SRV
participant "<<thread>>\nActivityFlowClientHandler" as RQ
participant "<<domain>>\nThead" as T
participant "<<domain>>\nSSLServerSocket" as SS
participant "<<domain>>\ncliSock:\nSocket" as S
participant "sf:\nSSLServerSocketFactory" as SSLSER

[o-> SRV : initiates automatic \ntask executor

activate SRV

SRV -> SRV : start(port, blocking)

opt if blocking
SRV -> SRV : listen(port)
else
SRV -> T**: create()

T -> T : listen(port)
activate T
deactivate T

SRV -> SSLSER : getDefault()
activate SSLSER

deactivate SSLSER

T -> T : start()
activate T 
deactivate T
end opt

SRV -> SS** : create(port)

SRV -> SS : setNeedClientAuth()

loop every time the server receives a request

SRV -> SS : clientSock = accept()
activate SS
deactivate SS

SRV -> SS: clientIP = getInetAddress()
activate SS
deactivate SS

SRV -> RQ** : create(clientSock)

SRV -> RQ : start()
activate RQ

ref over RQ
    SD_Request
end ref

deactivate RQ

end

deactivate SRV

@enduml

PlantUML version 1.2021.7(Sun May 23 13:40:07 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>